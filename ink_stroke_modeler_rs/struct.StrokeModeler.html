<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="This class models a stroke from a raw input stream. The modeling is performed in several stages"><title>StrokeModeler in ink_stroke_modeler_rs - Rust</title><script> if (window.location.protocol !== "file:") document.write(`<link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceSerif4-Regular-46f98efaafac5295.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/FiraSans-Regular-018c141bf0843ffd.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/FiraSans-Medium-8f9a781e4970d388.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2">`)</script><link rel="stylesheet" href="../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../static.files/rustdoc-e935ef01ae1c1829.css"><meta name="rustdoc-vars" data-root-path="../" data-static-root-path="../static.files/" data-current-crate="ink_stroke_modeler_rs" data-themes="" data-resource-suffix="" data-rustdoc-version="1.78.0 (9b00956e5 2024-04-29)" data-channel="1.78.0" data-search-js="search-42d8da7a6b9792c2.js" data-settings-js="settings-4313503d2e1961c2.js" ><script src="../static.files/storage-4c98445ec4002617.js"></script><script defer src="sidebar-items.js"></script><script defer src="../static.files/main-12cf3b4f4f9dc36d.js"></script><noscript><link rel="stylesheet" href="../static.files/noscript-04d5337699b92874.css"></noscript><link rel="alternate icon" type="image/png" href="../static.files/favicon-16x16-8b506e7a72182f1c.png"><link rel="alternate icon" type="image/png" href="../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../static.files/favicon-2c020d218678b618.svg"></head><body class="rustdoc struct"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle" title="show sidebar"></button></nav><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../ink_stroke_modeler_rs/index.html">ink_stroke_modeler_rs</a><span class="version">0.1.0</span></h2></div><h2 class="location"><a href="#">StrokeModeler</a></h2><div class="sidebar-elems"><section><h3><a href="#implementations">Methods</a></h3><ul class="block method"><li><a href="#method.new">new</a></li><li><a href="#method.predict">predict</a></li><li><a href="#method.reset">reset</a></li><li><a href="#method.reset_w_params">reset_w_params</a></li><li><a href="#method.update">update</a></li></ul><h3><a href="#trait-implementations">Trait Implementations</a></h3><ul class="block trait-implementation"><li><a href="#impl-Default-for-StrokeModeler">Default</a></li></ul><h3><a href="#synthetic-implementations">Auto Trait Implementations</a></h3><ul class="block synthetic-implementation"><li><a href="#impl-Freeze-for-StrokeModeler">Freeze</a></li><li><a href="#impl-RefUnwindSafe-for-StrokeModeler">RefUnwindSafe</a></li><li><a href="#impl-Send-for-StrokeModeler">Send</a></li><li><a href="#impl-Sync-for-StrokeModeler">Sync</a></li><li><a href="#impl-Unpin-for-StrokeModeler">Unpin</a></li><li><a href="#impl-UnwindSafe-for-StrokeModeler">UnwindSafe</a></li></ul><h3><a href="#blanket-implementations">Blanket Implementations</a></h3><ul class="block blanket-implementation"><li><a href="#impl-Any-for-T">Any</a></li><li><a href="#impl-Borrow%3CT%3E-for-T">Borrow&lt;T&gt;</a></li><li><a href="#impl-BorrowMut%3CT%3E-for-T">BorrowMut&lt;T&gt;</a></li><li><a href="#impl-From%3CT%3E-for-T">From&lt;T&gt;</a></li><li><a href="#impl-Into%3CU%3E-for-T">Into&lt;U&gt;</a></li><li><a href="#impl-TryFrom%3CU%3E-for-T">TryFrom&lt;U&gt;</a></li><li><a href="#impl-TryInto%3CU%3E-for-T">TryInto&lt;U&gt;</a></li></ul></section><h2><a href="index.html">In crate ink_stroke_modeler_rs</a></h2></div></nav><div class="sidebar-resizer"></div>
    <main><div class="width-limiter"><nav class="sub"><form class="search-form"><span></span><div id="sidebar-button" tabindex="-1"><a href="../ink_stroke_modeler_rs/all.html" title="show sidebar"></a></div><input class="search-input" name="search" aria-label="Run search in the documentation" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"><div id="help-button" tabindex="-1"><a href="../help.html" title="help">?</a></div><div id="settings-menu" tabindex="-1"><a href="../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../static.files/wheel-7b819b6101059cd0.svg"></a></div></form></nav><section id="main-content" class="content"><div class="main-heading"><h1>Struct <a href="index.html">ink_stroke_modeler_rs</a>::<wbr><a class="struct" href="#">StrokeModeler</a><button id="copy-path" title="Copy item path to clipboard"><img src="../static.files/clipboard-7571035ce49a181d.svg" width="19" height="18" alt="Copy item path"></button></h1><span class="out-of-band"><a class="src" href="../src/ink_stroke_modeler_rs/engine.rs.html#42-61">source</a> · <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><pre class="rust item-decl"><code>pub struct StrokeModeler { <span class="comment">/* private fields */</span> }</code></pre><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>This class models a stroke from a raw input stream. The modeling is performed in
several stages</p>
<ul>
<li>Wobble smoothing : dampens high-frequency noise from quantization error</li>
<li>Position modeling : models the pen tip as a mass, connected by a spring, to a moving
anchor</li>
<li>Stylus state modeling : constructs stylus states for modeled positions by interpolating
over the raw input</li>
</ul>
<p>Additional, this class provides prediction of the modeled stroke</p>
<p>StrokeModeler is unit-agnostic</p>
</div></details><h2 id="implementations" class="section-header">Implementations<a href="#implementations" class="anchor">§</a></h2><div id="implementations-list"><details class="toggle implementors-toggle" open><summary><section id="impl-StrokeModeler" class="impl"><a class="src rightside" href="../src/ink_stroke_modeler_rs/engine.rs.html#89-459">source</a><a href="#impl-StrokeModeler" class="anchor">§</a><h3 class="code-header">impl <a class="struct" href="struct.StrokeModeler.html" title="struct ink_stroke_modeler_rs::StrokeModeler">StrokeModeler</a></h3></section></summary><div class="docblock"><h2>Notations</h2>
<div class="box">
<p>We denote :</p>
<ul>
<li><p>Pressure :
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>ν</mi><mo>∈</mo><mo stretchy="false" form="prefix">[</mo><mn>0</mn><mo>,</mo><mn>1</mn><mo stretchy="false" form="postfix">]</mo></mrow><annotation encoding="application/x-tex">\nu \in \lbrack 0,1\rbrack</annotation></semantics></math></p></li>
<li><p>time :
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>t</mi><mo>≥</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">t \geq 0</annotation></semantics></math></p></li>
<li><p>point : defined by position
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>x</mi><annotation encoding="application/x-tex">x</annotation></semantics></math>
and
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>y</mi><annotation encoding="application/x-tex">y</annotation></semantics></math>
(or
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>p</mi><mo>=</mo><mrow><mo stretchy="true" form="prefix">(</mo><mi>x</mi><mo>,</mo><mi>y</mi><mo stretchy="true" form="postfix">)</mo></mrow><mo>∈</mo><msup><mi>ℝ</mi><mn>2</mn></msup></mrow><annotation encoding="application/x-tex">p = (x,y) \in {\mathbb{R}}^{2}</annotation></semantics></math>)</p></li>
<li><p>Raw inputs are denoted by a tuple
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi><mo stretchy="false" form="prefix">[</mo><mi>k</mi><mo stretchy="false" form="postfix">]</mo><mo>=</mo><mrow><mo stretchy="true" form="prefix">(</mo><mi>ν</mi><mo stretchy="false" form="prefix">[</mo><mi>k</mi><mo stretchy="false" form="postfix">]</mo><mo>,</mo><mi>t</mi><mo stretchy="false" form="prefix">[</mo><mi>k</mi><mo stretchy="false" form="postfix">]</mo><mo>,</mo><mi>x</mi><mo stretchy="false" form="prefix">[</mo><mi>k</mi><mo stretchy="false" form="postfix">]</mo><mo>,</mo><mi>y</mi><mo stretchy="false" form="prefix">[</mo><mi>k</mi><mo stretchy="false" form="postfix">]</mo><mo stretchy="true" form="postfix">)</mo></mrow></mrow><annotation encoding="application/x-tex">i\lbrack k\rbrack = \left( \nu\lbrack k\rbrack,t\lbrack k\rbrack,x\lbrack k\rbrack,y\lbrack k\rbrack \right)</annotation></semantics></math>
with
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>k</mi><mo>∈</mo><mi>ℕ</mi></mrow><annotation encoding="application/x-tex">k \in {\mathbb{N}}</annotation></semantics></math>.</p></li>
</ul>
</div>
<div class="box">
<p>An <em>input stream</em> is a sequence of raw inputs
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi><mo>=</mo><mrow><mo stretchy="true" form="prefix">(</mo><mi>ν</mi><mo>,</mo><mi>t</mi><mo>,</mo><mi>x</mi><mo>,</mo><mi>y</mi><mo stretchy="true" form="postfix">)</mo></mrow></mrow><annotation encoding="application/x-tex">i = (\nu,t,x,y)</annotation></semantics></math></p>
<ul>
<li><p>with time
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>t</mi><mo stretchy="false" form="prefix">[</mo><mi>k</mi><mo stretchy="false" form="postfix">]</mo></mrow><annotation encoding="application/x-tex">t\lbrack k\rbrack</annotation></semantics></math>
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>↗</mo><mo>↗</mo></mrow><annotation encoding="application/x-tex">\nearrow \nearrow</annotation></semantics></math>
strictly increasing</p></li>
<li><p>starts with a <code>Down</code> event</p></li>
<li><p>contains <code>Move</code> for
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>k</mi><mo>≥</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">k \geq 1</annotation></semantics></math></p></li>
<li><p>ends either with a <code>Move</code> or a <code>Up</code> . If it
is a <code>Up</code> we say the input stream is
<em>complete</em></p></li>
</ul>
</div>
<div class="box">
<p>We addition define</p>
<ul>
<li><p><math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>v</mi><mi>x</mi></msub><mo>,</mo><msub><mi>v</mi><mi>y</mi></msub><mo>,</mo><msub><mi>a</mi><mi>x</mi></msub><mo>,</mo><msub><mi>a</mi><mi>y</mi></msub></mrow><annotation encoding="application/x-tex">v_{x},v_{y},a_{x},a_{y}</annotation></semantics></math>
as the velocity and acceleration.</p></li>
</ul>
<p>With the vector shorthand
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>v</mi><mo>=</mo><mrow><mo stretchy="true" form="prefix">(</mo><msub><mi>v</mi><mi>x</mi></msub><mo>,</mo><msub><mi>v</mi><mi>y</mi></msub><mo stretchy="true" form="postfix">)</mo></mrow><mo>∈</mo><msup><mi>ℝ</mi><mn>2</mn></msup></mrow><annotation encoding="application/x-tex">v = \left( v_{x},v_{y} \right) \in {\mathbb{R}}^{2}</annotation></semantics></math>
and
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi><mo>=</mo><mrow><mo stretchy="true" form="prefix">(</mo><msub><mi>a</mi><mi>x</mi></msub><mo>,</mo><msub><mi>a</mi><mi>y</mi></msub><mo stretchy="true" form="postfix">)</mo></mrow><mo>∈</mo><msup><mi>ℝ</mi><mn>2</mn></msup></mrow><annotation encoding="application/x-tex">a = \left( a_{x},a_{y} \right) \in {\mathbb{R}}^{2}</annotation></semantics></math></p>
</div>
<h2>Resampling</h2>
<p><strong>Algorithm</strong> : Upsampling<br />
<strong>Input</strong> :
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="true" form="prefix">{</mo><mi>v</mi><mo stretchy="false" form="prefix">[</mo><mi>k</mi><mo stretchy="false" form="postfix">]</mo><mo>=</mo><mrow><mo stretchy="true" form="prefix">(</mo><mi>x</mi><mo stretchy="false" form="prefix">[</mo><mi>k</mi><mo stretchy="false" form="postfix">]</mo><mo>,</mo><mi>y</mi><mo stretchy="false" form="prefix">[</mo><mi>k</mi><mo stretchy="false" form="postfix">]</mo><mo>,</mo><mi>t</mi><mo stretchy="false" form="prefix">[</mo><mi>k</mi><mo stretchy="false" form="postfix">]</mo><mo stretchy="true" form="postfix">)</mo></mrow><mo>,</mo><mn>0</mn><mo>≤</mo><mi>k</mi><mo>≤</mo><mi>n</mi><mo stretchy="true" form="postfix">}</mo></mrow><annotation encoding="application/x-tex">\left\{ v\lbrack k\rbrack = \left( x\lbrack k\rbrack,y\lbrack k\rbrack,t\lbrack k\rbrack \right),0 \leq k \leq n \right\}</annotation></semantics></math>
and a target rate <code>sampling_min_output_rate</code>, Interpolate
time and position between each
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>k</mi><annotation encoding="application/x-tex">k</annotation></semantics></math>
by linearly adding interpolated values<br />
This is done by adding linearly interpolated values so that the output
stream is
<math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="true" form="prefix">{</mo><mi>v</mi><mo stretchy="false" form="prefix">[</mo><mn>0</mn><mo stretchy="false" form="postfix">]</mo><mo>,</mo><munder><munder><mrow><msub><mi>u</mi><mn>0</mn></msub><mo stretchy="false" form="prefix">[</mo><mn>1</mn><mo stretchy="false" form="postfix">]</mo><mo>,</mo><mi>…</mi><mo>,</mo><msub><mi>u</mi><mn>0</mn></msub><mrow><mo stretchy="true" form="prefix">[</mo><msub><mi>n</mi><mn>0</mn></msub><mo>−</mo><mn>1</mn><mo stretchy="true" form="postfix">]</mo></mrow></mrow><mo accent="true">⏟</mo></munder><mrow><mspace width="0.333em"></mspace><mtext mathvariant="normal"> interpolated</mtext></mrow></munder><mo>,</mo><mi>v</mi><mo stretchy="false" form="prefix">[</mo><mn>1</mn><mo stretchy="false" form="postfix">]</mo><mo>,</mo><munder><munder><mrow><msub><mi>u</mi><mn>1</mn></msub><mo stretchy="false" form="prefix">[</mo><mn>1</mn><mo stretchy="false" form="postfix">]</mo><mo>,</mo><mi>…</mi><mo>,</mo><msub><mi>u</mi><mn>1</mn></msub><mrow><mo stretchy="true" form="prefix">[</mo><msub><mi>n</mi><mn>1</mn></msub><mo>−</mo><mn>1</mn><mo stretchy="true" form="postfix">]</mo></mrow></mrow><mo accent="true">⏟</mo></munder><mrow><mspace width="0.333em"></mspace><mtext mathvariant="normal"> interpolated</mtext></mrow></munder><mo>,</mo><mi>v</mi><mo stretchy="false" form="prefix">[</mo><mn>2</mn><mo stretchy="false" form="postfix">]</mo><mo>,</mo><mi>…</mi><mo stretchy="true" form="postfix">}</mo></mrow><annotation encoding="application/x-tex">\left\{ v\lbrack 0\rbrack,\underset{\text{ interpolated}}{\underbrace{u_{0}\lbrack 1\rbrack,\ldots,u_{0}\left\lbrack n_{0} - 1 \right\rbrack}},v\lbrack 1\rbrack,\underset{\text{ interpolated}}{\underbrace{u_{1}\lbrack 1\rbrack,\ldots,u_{1}\left\lbrack n_{1} - 1 \right\rbrack}},v\lbrack 2\rbrack,\ldots \right\}</annotation></semantics></math>
Each
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>n</mi><mi>i</mi></msub><annotation encoding="application/x-tex">n_{i}</annotation></semantics></math>
is the minimum integer such that
<math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mtable><mtr><mtd columnalign="right" style="text-align: right"></mtd><mtd columnalign="left" style="text-align: left"><mfrac><mrow><mi>t</mi><mo stretchy="false" form="prefix">[</mo><mi>i</mi><mo stretchy="false" form="postfix">]</mo><mo>−</mo><mi>t</mi><mo stretchy="false" form="prefix">[</mo><mi>i</mi><mo>−</mo><mn>1</mn><mo stretchy="false" form="postfix">]</mo></mrow><msub><mi>n</mi><mi>i</mi></msub></mfrac><mo>&lt;</mo><msub><mi>Δ</mi><mtext mathvariant="normal">target</mtext></msub></mtd></mtr><mtr><mtd columnalign="right" style="text-align: right"><mo>⇔</mo></mtd><mtd columnalign="left" style="text-align: left"><msub><mi>n</mi><mi>i</mi></msub><mo>=</mo><mrow><mo stretchy="true" form="prefix">⌈</mo><mfrac><mrow><mi>t</mi><mo stretchy="false" form="prefix">[</mo><mi>i</mi><mo>+</mo><mn>1</mn><mo stretchy="false" form="postfix">]</mo><mo>−</mo><mi>t</mi><mo stretchy="false" form="prefix">[</mo><mi>i</mi><mo stretchy="false" form="postfix">]</mo></mrow><msub><mi>Δ</mi><mtext mathvariant="normal">target</mtext></msub></mfrac><mo stretchy="true" form="postfix">⌉</mo></mrow></mtd></mtr></mtable><annotation encoding="application/x-tex">\begin{aligned}
 &amp; \frac{t\lbrack i\rbrack - t\lbrack i - 1\rbrack}{n_{i}} &lt; \Delta_{\text{target}} \\
 \Leftrightarrow &amp; n_{i} = \left\lceil \frac{t\lbrack i + 1\rbrack - t\lbrack i\rbrack}{\Delta_{\text{target}}} \right\rceil
\end{aligned}</annotation></semantics></math> and the linear
interpolation means
<math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>u</mi><mi>j</mi></msub><mo stretchy="false" form="prefix">[</mo><mi>k</mi><mo stretchy="false" form="postfix">]</mo><mo>=</mo><mrow><mo stretchy="true" form="prefix">(</mo><mn>1</mn><mo>−</mo><mfrac><mi>k</mi><msub><mi>n</mi><mi>j</mi></msub></mfrac><mo stretchy="true" form="postfix">)</mo></mrow><mi>v</mi><mo stretchy="false" form="prefix">[</mo><mi>j</mi><mo stretchy="false" form="postfix">]</mo><mo>+</mo><mfrac><mi>k</mi><msub><mi>n</mi><mi>i</mi></msub></mfrac><mi>v</mi><mo stretchy="false" form="prefix">[</mo><mi>j</mi><mo>+</mo><mn>1</mn><mo stretchy="false" form="postfix">]</mo></mrow><annotation encoding="application/x-tex">u_{j}\lbrack k\rbrack = \left( 1 - \frac{k}{n_{j}} \right)v\lbrack j\rbrack + \frac{k}{n_{i}}v\lbrack j + 1\rbrack</annotation></semantics></math><br />
<strong>Output</strong> :
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="true" form="prefix">{</mo><mrow><mo stretchy="true" form="prefix">(</mo><mi>x</mi><mi>′</mi><mo stretchy="false" form="prefix">[</mo><mi>k</mi><mi>′</mi><mo stretchy="false" form="postfix">]</mo><mo>,</mo><mi>y</mi><mi>′</mi><mo stretchy="false" form="prefix">[</mo><mi>k</mi><mi>′</mi><mo stretchy="false" form="postfix">]</mo><mo>,</mo><mi>t</mi><mi>′</mi><mo stretchy="false" form="prefix">[</mo><mi>k</mi><mi>′</mi><mo stretchy="false" form="postfix">]</mo><mo stretchy="true" form="postfix">)</mo></mrow><mo>,</mo><mn>0</mn><mo>≤</mo><mi>k</mi><mo>;</mo><mo>≤</mo><mi>n</mi><mi>′</mi><mo stretchy="true" form="postfix">}</mo></mrow><annotation encoding="application/x-tex">\left\{ \left( x\prime\lbrack k\prime\rbrack,y\prime\lbrack k\prime\rbrack,t\prime\lbrack k\prime\rbrack \right),0 \leq k; \leq n\prime \right\}</annotation></semantics></math>
the upsampled position and times. This verifies
<math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>∀</mo><mi>k</mi><mi>′</mi><mo>,</mo><mi>t</mi><mi>′</mi><mo stretchy="false" form="prefix">[</mo><mi>k</mi><mi>′</mi><mo stretchy="false" form="postfix">]</mo><mo>−</mo><mi>t</mi><mi>′</mi><mo stretchy="false" form="prefix">[</mo><mi>k</mi><mi>′</mi><mo>−</mo><mn>1</mn><mo stretchy="false" form="postfix">]</mo><mo>&lt;</mo><msub><mi>Δ</mi><mrow><mtext mathvariant="normal">target </mtext><mspace width="0.333em"></mspace></mrow></msub><mo>=</mo><mfrac><mn>1</mn><mrow></mrow></mfrac></mrow><annotation encoding="application/x-tex">\forall k\prime,t\prime\lbrack k\prime\rbrack - t\prime\lbrack k\prime - 1\rbrack &lt; \Delta_{\text{target }} = \frac{1}{}</annotation></semantics></math><br />
<strong>Remark</strong> : As this is a streaming algorithm, we only
calculate this interpolation with respect to the latest stroke
position.</p>
<h2>Position modeling</h2>
<div class="box">
<p>The raw input is processed as follow</p>
<p>raw input
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mo>→</mo><annotation encoding="application/x-tex">\rightarrow</annotation></semantics></math>
wobble smoother
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mo>→</mo><annotation encoding="application/x-tex">\rightarrow</annotation></semantics></math>
upsampled
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mo>→</mo><annotation encoding="application/x-tex">\rightarrow</annotation></semantics></math>
position modeling</p>
</div>
<div class="box">
<p>The position of the pen is modeled as a weight connected by a spring
to an anchor.</p>
<p>The anchor moves along the <em>resampled dewobbled inputs</em>,
pulling the weight along with it across a surface, with some amount of
friction. Euler integration is used to solve for the position of the
pen.</p>
<figure>
<p><img src="position_model.svg" /></p>
</figure>
<p>The physical model that is used to model the stroke is the following
<math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mfrac><mrow><msup><mi>d</mi><mn>2</mn></msup><mi>s</mi></mrow><mrow><mi>d</mi><msup><mi>t</mi><mn>2</mn></msup></mrow></mfrac><mo>=</mo><mfrac><mrow><mi>Φ</mi><mrow><mo stretchy="true" form="prefix">(</mo><mi>t</mi><mo stretchy="true" form="postfix">)</mo></mrow><mo>−</mo><mi>s</mi><mrow><mo stretchy="true" form="prefix">(</mo><mi>t</mi><mo stretchy="true" form="postfix">)</mo></mrow></mrow><msub><mi>k</mi><mrow><mtext mathvariant="normal">spring </mtext><mspace width="0.333em"></mspace></mrow></msub></mfrac><mo>−</mo><msub><mi>k</mi><mrow><mtext mathvariant="normal">drag </mtext><mspace width="0.333em"></mspace></mrow></msub><mfrac><mrow><mi>d</mi><mi>s</mi></mrow><mrow><mi>d</mi><mi>t</mi></mrow></mfrac></mrow><annotation encoding="application/x-tex">\frac{d^{2}s}{dt^{2}} = \frac{\Phi(t) - s(t)}{k_{\text{spring }}} - k_{\text{drag }}\frac{ds}{dt}</annotation></semantics></math>
where</p>
<ul>
<li><p><math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>t</mi><annotation encoding="application/x-tex">t</annotation></semantics></math>
is time</p></li>
<li><p><math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>s</mi><mrow><mo stretchy="true" form="prefix">(</mo><mi>t</mi><mo stretchy="true" form="postfix">)</mo></mrow></mrow><annotation encoding="application/x-tex">s(t)</annotation></semantics></math>
is the position of the pen</p></li>
<li><p><math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Φ</mi><mrow><mo stretchy="true" form="prefix">(</mo><mi>t</mi><mo stretchy="true" form="postfix">)</mo></mrow></mrow><annotation encoding="application/x-tex">\Phi(t)</annotation></semantics></math>
is the position of the anchor</p></li>
<li><p><math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>k</mi><mtext mathvariant="normal">spring</mtext></msub><annotation encoding="application/x-tex">k_{\text{spring}}</annotation></semantics></math>
and
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>k</mi><mtext mathvariant="normal">drag</mtext></msub><annotation encoding="application/x-tex">k_{\text{drag}}</annotation></semantics></math>
are constants that sets how the spring and drag occurs</p></li>
</ul>
<p><math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>k</mi><mtext mathvariant="normal">spring</mtext></msub><annotation encoding="application/x-tex">k_{\text{spring}}</annotation></semantics></math>
is given by <code>position_modeler_spring_mass_constant</code> and
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>k</mi><mtext mathvariant="normal">drag</mtext></msub><annotation encoding="application/x-tex">k_{\text{drag}}</annotation></semantics></math>
by <code>position_modeler_drag_constant</code></p>
<p>We will thus have as input the <em>upsampled dewobbled inputs</em>
taking the role of discretized
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Φ</mi><mrow><mo stretchy="true" form="prefix">(</mo><mi>t</mi><mo stretchy="true" form="postfix">)</mo></mrow></mrow><annotation encoding="application/x-tex">\Phi(t)</annotation></semantics></math>
and
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>s</mi><mrow><mo stretchy="true" form="prefix">(</mo><mi>t</mi><mo stretchy="true" form="postfix">)</mo></mrow></mrow><annotation encoding="application/x-tex">s(t)</annotation></semantics></math>
will be the output</p>
</div>
<div class="box">
<p>Modeling a stroke.</p>
<ul>
<li><p>Input : input stream
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="true" form="prefix">{</mo><mrow><mo stretchy="true" form="prefix">(</mo><mi>p</mi><mo stretchy="false" form="prefix">[</mo><mi>k</mi><mo stretchy="false" form="postfix">]</mo><mo>,</mo><mi>t</mi><mo stretchy="false" form="prefix">[</mo><mi>k</mi><mo stretchy="false" form="postfix">]</mo><mo stretchy="true" form="postfix">)</mo></mrow><mo>,</mo><mn>0</mn><mo>≤</mo><mi>k</mi><mo>≤</mo><mi>n</mi><mo stretchy="true" form="postfix">}</mo></mrow><annotation encoding="application/x-tex">\left\{ \left( p\lbrack k\rbrack,t\lbrack k\rbrack \right),0 \leq k \leq n \right\}</annotation></semantics></math></p></li>
<li><p>Output : smoothed stream
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="true" form="prefix">{</mo><mrow><mo stretchy="true" form="prefix">(</mo><msub><mi>p</mi><mi>f</mi></msub><mo stretchy="false" form="prefix">[</mo><mi>k</mi><mo stretchy="false" form="postfix">]</mo><mo>,</mo><msub><mi>v</mi><mi>f</mi></msub><mo stretchy="false" form="prefix">[</mo><mi>k</mi><mo stretchy="false" form="postfix">]</mo><mo>,</mo><msub><mi>a</mi><mi>f</mi></msub><mo stretchy="false" form="prefix">[</mo><mi>k</mi><mo stretchy="false" form="postfix">]</mo><mo stretchy="true" form="postfix">)</mo></mrow><mo>,</mo><mn>0</mn><mo>≤</mo><mi>k</mi><mo>≤</mo><mi>n</mi><mo stretchy="true" form="postfix">}</mo></mrow><annotation encoding="application/x-tex">\left\{ \left( p_{f}\lbrack k\rbrack,v_{f}\lbrack k\rbrack,a_{f}\lbrack k\rbrack \right),0 \leq k \leq n \right\}</annotation></semantics></math></p></li>
</ul>
<p>We define
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Φ</mi><mo stretchy="false" form="prefix">[</mo><mi>k</mi><mo stretchy="false" form="postfix">]</mo><mo>=</mo><mi>p</mi><mo stretchy="false" form="prefix">[</mo><mi>k</mi><mo stretchy="false" form="postfix">]</mo></mrow><annotation encoding="application/x-tex">\Phi\lbrack k\rbrack = p\lbrack k\rbrack</annotation></semantics></math>.
An euler scheme integration scheme is used with the initial conditions
being
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>v</mi><mo stretchy="false" form="prefix">[</mo><mn>0</mn><mo stretchy="false" form="postfix">]</mo><mo>=</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">v\lbrack 0\rbrack = 0</annotation></semantics></math>
and
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>p</mi><mi>f</mi></msub><mo stretchy="false" form="prefix">[</mo><mn>0</mn><mo stretchy="false" form="postfix">]</mo><mo>=</mo><mi>p</mi><mo stretchy="false" form="prefix">[</mo><mn>0</mn><mo stretchy="false" form="postfix">]</mo></mrow><annotation encoding="application/x-tex">p_{f}\lbrack 0\rbrack = p\lbrack 0\rbrack</annotation></semantics></math>
(same initial conditions)</p>
<p>Update rule is simply
<math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mtable><mtr><mtd columnalign="right" style="text-align: right"><msub><mi>a</mi><mi>f</mi></msub><mo stretchy="false" form="prefix">[</mo><mi>j</mi><mo stretchy="false" form="postfix">]</mo><mo>=</mo><mfrac><mrow><mi>p</mi><mo stretchy="false" form="prefix">[</mo><mi>j</mi><mo stretchy="false" form="postfix">]</mo><mo>−</mo><msub><mi>p</mi><mi>f</mi></msub><mo stretchy="false" form="prefix">[</mo><mi>j</mi><mo>−</mo><mn>1</mn><mo stretchy="false" form="postfix">]</mo></mrow><msub><mi>k</mi><mrow><mtext mathvariant="normal">spring </mtext><mspace width="0.333em"></mspace></mrow></msub></mfrac><mo>−</mo><msub><mi>k</mi><mrow><mtext mathvariant="normal">drag </mtext><mspace width="0.333em"></mspace></mrow></msub><msub><mi>v</mi><mi>f</mi></msub><mo stretchy="false" form="prefix">[</mo><mi>j</mi><mo>−</mo><mn>1</mn><mo stretchy="false" form="postfix">]</mo></mtd></mtr><mtr><mtd columnalign="right" style="text-align: right"><msub><mi>v</mi><mi>f</mi></msub><mo stretchy="false" form="prefix">[</mo><mi>j</mi><mo stretchy="false" form="postfix">]</mo><mo>=</mo><msub><mi>v</mi><mi>f</mi></msub><mo stretchy="false" form="prefix">[</mo><mi>j</mi><mo>−</mo><mn>1</mn><mo stretchy="false" form="postfix">]</mo><mo>+</mo><mrow><mo stretchy="true" form="prefix">(</mo><mi>t</mi><mo stretchy="false" form="prefix">[</mo><mi>j</mi><mo stretchy="false" form="postfix">]</mo><mo>−</mo><mi>t</mi><mo stretchy="false" form="prefix">[</mo><mi>j</mi><mo>−</mo><mn>1</mn><mo stretchy="false" form="postfix">]</mo><mo stretchy="true" form="postfix">)</mo></mrow><msub><mi>a</mi><mi>f</mi></msub><mo stretchy="false" form="prefix">[</mo><mi>j</mi><mo stretchy="false" form="postfix">]</mo></mtd></mtr><mtr><mtd columnalign="right" style="text-align: right"><msub><mi>p</mi><mi>f</mi></msub><mo stretchy="false" form="prefix">[</mo><mi>j</mi><mo stretchy="false" form="postfix">]</mo><mo>=</mo><msub><mi>p</mi><mi>f</mi></msub><mo stretchy="false" form="prefix">[</mo><mi>j</mi><mo>−</mo><mn>1</mn><mo stretchy="false" form="postfix">]</mo><mo>+</mo><mrow><mo stretchy="true" form="prefix">(</mo><mi>t</mi><mo stretchy="false" form="prefix">[</mo><mi>j</mi><mo stretchy="false" form="postfix">]</mo><mo>−</mo><mi>t</mi><mo stretchy="false" form="prefix">[</mo><mi>j</mi><mo>−</mo><mn>1</mn><mo stretchy="false" form="postfix">]</mo><mo stretchy="true" form="postfix">)</mo></mrow><msub><mi>v</mi><mi>f</mi></msub><mo stretchy="false" form="prefix">[</mo><mi>j</mi><mo stretchy="false" form="postfix">]</mo></mtd></mtr></mtable><annotation encoding="application/x-tex">\begin{array}{r}
a_{f}\lbrack j\rbrack = \frac{p\lbrack j\rbrack - p_{f}\lbrack j - 1\rbrack}{k_{\text{spring }}} - k_{\text{drag }}v_{f}\lbrack j - 1\rbrack \\
v_{f}\lbrack j\rbrack = v_{f}\lbrack j - 1\rbrack + \left( t\lbrack j\rbrack - t\lbrack j - 1\rbrack \right)a_{f}\lbrack j\rbrack \\
p_{f}\lbrack j\rbrack = p_{f}\lbrack j - 1\rbrack + \left( t\lbrack j\rbrack - t\lbrack j - 1\rbrack \right)v_{f}\lbrack j\rbrack
\end{array}</annotation></semantics></math> The position
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>s</mi><mo stretchy="false" form="prefix">[</mo><mi>j</mi><mo stretchy="false" form="postfix">]</mo></mrow><annotation encoding="application/x-tex">s\lbrack j\rbrack</annotation></semantics></math>
is the main thing to export but we can also export speed and
acceleration if needed. We denote
<math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>q</mi><mo stretchy="false" form="prefix">[</mo><mi>j</mi><mo stretchy="false" form="postfix">]</mo><mo>=</mo><mrow><mo stretchy="true" form="prefix">(</mo><msub><mi>p</mi><mi>f</mi></msub><mo stretchy="false" form="prefix">[</mo><mi>j</mi><mo stretchy="false" form="postfix">]</mo><mo>,</mo><msub><mi>v</mi><mi>f</mi></msub><mo stretchy="false" form="prefix">[</mo><mi>j</mi><mo stretchy="false" form="postfix">]</mo><mo>,</mo><msub><mi>a</mi><mi>f</mi></msub><mo stretchy="false" form="prefix">[</mo><mi>j</mi><mo stretchy="false" form="postfix">]</mo><mo>,</mo><mi>t</mi><mo stretchy="false" form="prefix">[</mo><mi>j</mi><mo stretchy="false" form="postfix">]</mo><mo stretchy="true" form="postfix">)</mo></mrow></mrow><annotation encoding="application/x-tex">q\lbrack j\rbrack = \left( p_{f}\lbrack j\rbrack,v_{f}\lbrack j\rbrack,a_{f}\lbrack j\rbrack,t\lbrack j\rbrack \right)</annotation></semantics></math>
and this will be our output with
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0</mn><mo>≤</mo><mi>j</mi><mo>≤</mo><mi>n</mi></mrow><annotation encoding="application/x-tex">0 \leq j \leq n</annotation></semantics></math></p>
</div>
<h2>Stylus state modeler</h2>
<p>Up till now we have only used the raw input stream to create a new
smoothed stream of positions, leaving behind the pressure attribute.
This is what’s done here, to model the state of the stylus for these new
position based on the pressure data of the raw input strokes.<br />
<strong>Algorithm</strong> Stylus state modeler<br />
<strong>Input</strong> :</p>
<ul>
<li><p>input stream with pressure information
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="true" form="prefix">{</mo><mrow><mo stretchy="true" form="prefix">(</mo><mi>p</mi><mo stretchy="false" form="prefix">[</mo><mi>k</mi><mo stretchy="false" form="postfix">]</mo><mo>=</mo><mrow><mo stretchy="true" form="prefix">(</mo><mi>x</mi><mo stretchy="false" form="prefix">[</mo><mi>k</mi><mo stretchy="false" form="postfix">]</mo><mo>,</mo><mi>y</mi><mo stretchy="false" form="prefix">[</mo><mi>k</mi><mo stretchy="false" form="postfix">]</mo><mo stretchy="true" form="postfix">)</mo></mrow><mo>,</mo><mi>ν</mi><mo stretchy="false" form="prefix">[</mo><mi>k</mi><mo stretchy="false" form="postfix">]</mo><mo stretchy="true" form="postfix">)</mo></mrow><mo>,</mo><mn>0</mn><mo>≤</mo><mi>k</mi><mo>≤</mo><mi>n</mi><mo stretchy="true" form="postfix">}</mo></mrow><annotation encoding="application/x-tex">\left\{ \left( p\lbrack k\rbrack = \left( x\lbrack k\rbrack,y\lbrack k\rbrack \right),\nu\lbrack k\rbrack \right),0 \leq k \leq n \right\}</annotation></semantics></math></p></li>
<li><p>query position
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>q</mi><mo>=</mo><mrow><mo stretchy="true" form="prefix">(</mo><mi>x</mi><mo>,</mo><mi>y</mi><mo stretchy="true" form="postfix">)</mo></mrow></mrow><annotation encoding="application/x-tex">q = (x,y)</annotation></semantics></math></p></li>
<li><p>search window
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>n</mi><mtext mathvariant="normal">search</mtext></msub><annotation encoding="application/x-tex">n_{\text{search}}</annotation></semantics></math>
(From <code>stylus_state_modeler_max_input_samples</code>),</p></li>
</ul>
<p><br />
<strong>initialize</strong>
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>d</mi><mo>=</mo><mi>∞</mi></mrow><annotation encoding="application/x-tex">d = \infty</annotation></semantics></math>,
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext mathvariant="normal">index</mtext><mo>=</mo><mtext mathvariant="normal">None</mtext></mrow><annotation encoding="application/x-tex">\text{index} = \text{None}</annotation></semantics></math>,
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mrow><mtext mathvariant="normal">interp </mtext><mspace width="0.333em"></mspace></mrow><mo>=</mo><mrow><mspace width="0.333em"></mspace><mtext mathvariant="normal"> None</mtext></mrow></mrow><annotation encoding="application/x-tex">\text{interp } = \text{ None}</annotation></semantics></math><br />
<strong>for</strong>
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi><mo>=</mo><mi>n</mi><mo>−</mo><msub><mi>n</mi><mtext mathvariant="normal">search</mtext></msub></mrow><annotation encoding="application/x-tex">i = n - n_{\text{search}}</annotation></semantics></math>
to
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi><mo>−</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">n - 1</annotation></semantics></math>
<strong>do</strong><br />
- <strong>Find</strong>
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>q</mi><mi>i</mi></msub><annotation encoding="application/x-tex">q_{i}</annotation></semantics></math>
the position that’s closest to
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>q</mi><annotation encoding="application/x-tex">q</annotation></semantics></math>
on the segment
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="true" form="prefix">[</mo><mi>p</mi><mo stretchy="false" form="prefix">[</mo><mi>i</mi><mo stretchy="false" form="postfix">]</mo><mo>,</mo><mi>p</mi><mo stretchy="false" form="prefix">[</mo><mi>i</mi><mo>+</mo><mn>1</mn><mo stretchy="false" form="postfix">]</mo><mo stretchy="true" form="postfix">]</mo></mrow><annotation encoding="application/x-tex">\left\lbrack p\lbrack i\rbrack,p\lbrack i + 1\rbrack \right\rbrack</annotation></semantics></math>
and denote
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>r</mi><mo>∈</mo><mo stretchy="false" form="prefix">[</mo><mn>0</mn><mo>,</mo><mn>1</mn><mo stretchy="false" form="postfix">]</mo></mrow><annotation encoding="application/x-tex">r \in \lbrack 0,1\rbrack</annotation></semantics></math>
the value such that
<math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>q</mi><mi>i</mi></msub><mo>=</mo><mrow><mo stretchy="true" form="prefix">(</mo><mn>1</mn><mo>−</mo><mi>r</mi><mo stretchy="true" form="postfix">)</mo></mrow><mi>p</mi><mo stretchy="false" form="prefix">[</mo><mi>i</mi><mo stretchy="false" form="postfix">]</mo><mo>+</mo><mi>r</mi><mi>p</mi><mo stretchy="false" form="prefix">[</mo><mi>i</mi><mo>+</mo><mn>1</mn><mo stretchy="false" form="postfix">]</mo></mrow><annotation encoding="application/x-tex">q_{i} = (1 - r)p\lbrack i\rbrack + rp\lbrack i + 1\rbrack</annotation></semantics></math><br />
- <strong>if</strong>
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mrow><mo>∥</mo><mrow><mi>q</mi><mo>−</mo><msub><mi>q</mi><mi>i</mi></msub></mrow></mrow><mo>∥</mo><mo>&lt;</mo><mi>d</mi></mrow><annotation encoding="application/x-tex">\left. \parallel{q - q_{i}} \right.\parallel &lt; d</annotation></semantics></math><br />
-
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mtable><mtr><mtd columnalign="right" style="text-align: right"><mi>d</mi><mo>←</mo><mrow><mo>∥</mo><mrow><mi>q</mi><mo>−</mo><msub><mi>q</mi><mi>i</mi></msub></mrow></mrow><mo>∥</mo><mo>&lt;</mo><mi>d</mi></mtd></mtr><mtr><mtd columnalign="right" style="text-align: right"><mrow><mtext mathvariant="normal">index </mtext><mspace width="0.333em"></mspace></mrow><mo>=</mo><mi>i</mi></mtd></mtr><mtr><mtd columnalign="right" style="text-align: right"><mrow><mtext mathvariant="normal">interp </mtext><mspace width="0.333em"></mspace></mrow><mo>=</mo><mi>r</mi></mtd></mtr></mtable><annotation encoding="application/x-tex">\begin{array}{r}
d \leftarrow \left. \parallel{q - q_{i}} \right.\parallel &lt; d \\
\text{index } = i \\
\text{interp } = r
\end{array}</annotation></semantics></math><br />
- <strong>endif</strong><br />
<strong>endfor</strong><br />
<strong>calculate</strong>
<math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>ν</mi><mo>=</mo><mrow><mo stretchy="true" form="prefix">(</mo><mn>1</mn><mo>−</mo><mi>r</mi><mo stretchy="true" form="postfix">)</mo></mrow><mi>ν</mi><mrow><mo stretchy="true" form="prefix">[</mo><mtext mathvariant="normal">index</mtext><mo stretchy="true" form="postfix">]</mo></mrow><mo>+</mo><mi>r</mi><mi>ν</mi><mrow><mo stretchy="true" form="prefix">[</mo><mrow><mtext mathvariant="normal">index </mtext><mspace width="0.333em"></mspace></mrow><mo>+</mo><mn>1</mn><mo stretchy="true" form="postfix">]</mo></mrow></mrow><annotation encoding="application/x-tex">\nu = (1 - r)\nu\left\lbrack \text{index} \right\rbrack + r\nu\left\lbrack \text{index } + 1 \right\rbrack</annotation></semantics></math><br />
<strong>Output</strong> : interpolated pressure
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>ν</mi><annotation encoding="application/x-tex">\nu</annotation></semantics></math></p>
<h2>Stroke end</h2>
<p>The position modeling algorithm will lag behind the raw input by some
distance. This algorithm iterates the previous dynamical system a few
additional time using the raw input position as the anchor to allow a
<code>catch up</code> of the stroke (though this prediction is only
given by <code>predict</code>, so is not part of the
<code>results</code> and becomes obsolete on the next input).</p>
<p><strong>Algorithm</strong> :Stroke end<br />
<strong>Input</strong>:</p>
<ul>
<li><p>Final anchor position
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>p</mi><mrow><mo stretchy="true" form="prefix">[</mo><mtext mathvariant="normal">end</mtext><mo stretchy="true" form="postfix">]</mo></mrow><mo>=</mo><mrow><mo stretchy="true" form="prefix">(</mo><mi>x</mi><mrow><mo stretchy="true" form="prefix">[</mo><mtext mathvariant="normal">end</mtext><mo stretchy="true" form="postfix">]</mo></mrow><mo>,</mo><mi>y</mi><mrow><mo stretchy="true" form="prefix">[</mo><mtext mathvariant="normal">end</mtext><mo stretchy="true" form="postfix">]</mo></mrow><mo stretchy="true" form="postfix">)</mo></mrow></mrow><annotation encoding="application/x-tex">p\left\lbrack \text{end} \right\rbrack = \left( x\left\lbrack \text{end} \right\rbrack,y\left\lbrack \text{end} \right\rbrack \right)</annotation></semantics></math>
(From the original input stream)</p></li>
<li><p>final tip state
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>q</mi><mi>f</mi></msub><mrow><mo stretchy="true" form="prefix">[</mo><mtext mathvariant="normal">end</mtext><mo stretchy="true" form="postfix">]</mo></mrow><mo>=</mo><mrow><mo stretchy="true" form="prefix">(</mo><msub><mi>p</mi><mi>f</mi></msub><mrow><mo stretchy="true" form="prefix">[</mo><mtext mathvariant="normal">end</mtext><mo stretchy="true" form="postfix">]</mo></mrow><mo>=</mo><mrow><mo stretchy="true" form="prefix">(</mo><msub><mi>x</mi><mi>f</mi></msub><mrow><mo stretchy="true" form="prefix">[</mo><mtext mathvariant="normal">end</mtext><mo stretchy="true" form="postfix">]</mo></mrow><mo>,</mo><msub><mi>y</mi><mi>f</mi></msub><mrow><mo stretchy="true" form="prefix">[</mo><mtext mathvariant="normal">end</mtext><mo stretchy="true" form="postfix">]</mo></mrow><mo stretchy="true" form="postfix">)</mo></mrow><mo>,</mo><msub><mi>v</mi><mi>f</mi></msub><mrow><mo stretchy="true" form="prefix">[</mo><mtext mathvariant="normal">end</mtext><mo stretchy="true" form="postfix">]</mo></mrow><mo>,</mo><msub><mi>a</mi><mi>f</mi></msub><mrow><mo stretchy="true" form="prefix">[</mo><mtext mathvariant="normal">end</mtext><mo stretchy="true" form="postfix">]</mo></mrow><mo stretchy="true" form="postfix">)</mo></mrow></mrow><annotation encoding="application/x-tex">q_{f}\left\lbrack \text{end} \right\rbrack = \left( p_{f}\left\lbrack \text{end} \right\rbrack = \left( x_{f}\left\lbrack \text{end} \right\rbrack,y_{f}\left\lbrack \text{end} \right\rbrack \right),v_{f}\left\lbrack \text{end} \right\rbrack,a_{f}\left\lbrack \text{end} \right\rbrack \right)</annotation></semantics></math>
(returned from the physical modeling from the last section,
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mo>⋅</mo><mi>f</mi></msub><annotation encoding="application/x-tex">\cdot_{f}</annotation></semantics></math>
signifies that we are looking at the filtered output)</p></li>
<li><p><math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>K</mi><mtext mathvariant="normal">max</mtext></msub><annotation encoding="application/x-tex">K_{\text{max}}</annotation></semantics></math>
max number of iterations
(<code>sampling_end_of_stroke_max_iterations</code>)</p></li>
<li><p><math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>Δ</mi><mtext mathvariant="normal">target</mtext></msub><annotation encoding="application/x-tex">\Delta_{\text{target}}</annotation></semantics></math>
the target time delay between stroke
(1/<code>sampling_min_output_rate</code>)</p></li>
<li><p><math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>d</mi><mtext mathvariant="normal">stop</mtext></msub><annotation encoding="application/x-tex">d_{\text{stop}}</annotation></semantics></math>
stopping distance
(<code>sampling_end_of_stroke_stopping_distance</code>)</p></li>
<li><p><math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>k</mi><mtext mathvariant="normal">spring</mtext></msub><annotation encoding="application/x-tex">k_{\text{spring}}</annotation></semantics></math>
and
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>k</mi><mtext mathvariant="normal">drag</mtext></msub><annotation encoding="application/x-tex">k_{\text{drag}}</annotation></semantics></math>
the modeling coefficients</p></li>
</ul>
<p><strong>initialize</strong> the vector
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>q</mi><mi>o</mi></msub><annotation encoding="application/x-tex">q_{o}</annotation></semantics></math>
with
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>q</mi><mn>0</mn></msub><mo stretchy="false" form="prefix">[</mo><mn>0</mn><mo stretchy="false" form="postfix">]</mo><mo>=</mo><mrow><mrow><mo stretchy="true" form="prefix">(</mo><munder><munder><mrow><msub><mi>p</mi><mi>f</mi></msub><mrow><mo stretchy="true" form="prefix">[</mo><mtext mathvariant="normal">end</mtext><mo stretchy="true" form="postfix">]</mo></mrow></mrow><mo accent="true">⏟</mo></munder><mrow><msub><mi>p</mi><mi>o</mi></msub><mo stretchy="false" form="prefix">[</mo><mn>0</mn><mo stretchy="false" form="postfix">]</mo></mrow></munder><mo>,</mo><munder><munder><mrow><msub><mi>v</mi><mi>f</mi></msub><mrow><mo stretchy="true" form="prefix">[</mo><mtext mathvariant="normal">end</mtext><mo stretchy="true" form="postfix">]</mo></mrow></mrow><mo accent="true">⏟</mo></munder><mrow><msub><mi>v</mi><mi>o</mi></msub><mo stretchy="false" form="prefix">[</mo><mn>0</mn><mo stretchy="false" form="postfix">]</mo></mrow></munder><mo>,</mo><munder><munder><mrow><msub><mi>a</mi><mi>f</mi></msub><mrow><mo stretchy="true" form="prefix">[</mo><mtext mathvariant="normal">end</mtext><mo stretchy="true" form="postfix">]</mo></mrow></mrow><mo accent="true">⏟</mo></munder><mrow><msub><mi>a</mi><mn>0</mn></msub><mo stretchy="false" form="prefix">[</mo><mn>0</mn><mo stretchy="false" form="postfix">]</mo></mrow></munder><mo stretchy="true" form="postfix">)</mo></mrow></mrow></mrow><annotation encoding="application/x-tex">q_{0}\lbrack 0\rbrack = \left. \left( \underset{p_{o}\lbrack 0\rbrack}{\underbrace{p_{f}\left\lbrack \text{end} \right\rbrack}},\underset{v_{o}\lbrack 0\rbrack}{\underbrace{v_{f}\left\lbrack \text{end} \right\rbrack}},\underset{a_{0}\lbrack 0\rbrack}{\underbrace{a_{f}\left\lbrack \text{end} \right\rbrack}} \right) \right.</annotation></semantics></math><br />
<strong>initialize</strong>
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Δ</mi><mi>t</mi><mo>=</mo><msub><mi>Δ</mi><mtext mathvariant="normal">target</mtext></msub></mrow><annotation encoding="application/x-tex">\Delta t = \Delta_{\text{target}}</annotation></semantics></math><br />
<strong>for</strong>
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn><mo>≤</mo><mi>k</mi><mo>≤</mo><msub><mi>K</mi><mtext mathvariant="normal">max</mtext></msub></mrow><annotation encoding="application/x-tex">1 \leq k \leq K_{\text{max}}</annotation></semantics></math><br />
- <strong>calculate</strong> the next candidate
<math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mtable><mtr><mtd columnalign="right" style="text-align: right"><msub><mi>a</mi><mi>c</mi></msub></mtd><mtd columnalign="left" style="text-align: left"><mo>=</mo><mfrac><mrow><mi>p</mi><mrow><mo stretchy="true" form="prefix">[</mo><mtext mathvariant="normal">end</mtext><mo stretchy="true" form="postfix">]</mo></mrow><mo>−</mo><msub><mi>p</mi><mi>o</mi></msub><mrow><mo stretchy="true" form="prefix">[</mo><mtext mathvariant="normal">end</mtext><mo stretchy="true" form="postfix">]</mo></mrow></mrow><msub><mi>k</mi><mtext mathvariant="normal">spring</mtext></msub></mfrac><mo>−</mo><msub><mi>k</mi><mrow><mtext mathvariant="normal">drag </mtext><mspace width="0.333em"></mspace></mrow></msub><msub><mi>v</mi><mn>0</mn></msub><mrow><mo stretchy="true" form="prefix">[</mo><mtext mathvariant="normal">end</mtext><mo stretchy="true" form="postfix">]</mo></mrow></mtd></mtr><mtr><mtd columnalign="right" style="text-align: right"><msub><mi>v</mi><mi>c</mi></msub></mtd><mtd columnalign="left" style="text-align: left"><mo>=</mo><msub><mi>v</mi><mi>o</mi></msub><mo stretchy="false" form="prefix">[</mo><mn>0</mn><mo stretchy="false" form="postfix">]</mo><mo>+</mo><mi>Δ</mi><mi>t</mi><msub><mi>a</mi><mi>c</mi></msub></mtd></mtr><mtr><mtd columnalign="right" style="text-align: right"><msub><mi>p</mi><mi>c</mi></msub></mtd><mtd columnalign="left" style="text-align: left"><mo>=</mo><msub><mi>p</mi><mi>o</mi></msub><mo stretchy="false" form="prefix">[</mo><mn>0</mn><mo stretchy="false" form="postfix">]</mo><mo>+</mo><mi>Δ</mi><msub><mi>v</mi><mi>c</mi></msub></mtd></mtr></mtable><annotation encoding="application/x-tex">\begin{aligned}
a_{c} &amp; = \frac{p\left\lbrack \text{end} \right\rbrack - p_{o}\left\lbrack \text{end} \right\rbrack}{k_{\text{spring}}} - k_{\text{drag }}v_{0}\left\lbrack \text{end} \right\rbrack \\
v_{c} &amp; = v_{o}\lbrack 0\rbrack + \Delta ta_{c} \\
p_{c} &amp; = p_{o}\lbrack 0\rbrack + \Delta v_{c}
\end{aligned}</annotation></semantics></math></p>
<p><br />
- <strong>if</strong>
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mrow><mo>∥</mo><mrow><msub><mi>p</mi><mi>c</mi></msub><mo>−</mo><mi>p</mi><mrow><mo stretchy="true" form="prefix">[</mo><mtext mathvariant="normal">end</mtext><mo stretchy="true" form="postfix">]</mo></mrow></mrow></mrow><mo>∥</mo><mo>&lt;</mo><msub><mi>d</mi><mtext mathvariant="normal">stop</mtext></msub></mrow><annotation encoding="application/x-tex">\left. \parallel{p_{c} - p\left\lbrack \text{end} \right\rbrack} \right.\parallel &lt; d_{\text{stop}}</annotation></semantics></math>
(further iterations won’t be able to catch up and won’t move closer to
the anchor, we stop here), - <strong>return</strong>
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>q</mi><mn>0</mn></msub><annotation encoding="application/x-tex">q_{0}</annotation></semantics></math><br />
- <strong>endif</strong><br />
</p>
<ul>
<li><p><strong>if</strong>
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false" form="prefix">⟨</mo><msub><mi>p</mi><mi>c</mi></msub><mo>−</mo><msub><mi>p</mi><mi>o</mi></msub><mrow><mo stretchy="true" form="prefix">[</mo><mtext mathvariant="normal">end</mtext><mo stretchy="true" form="postfix">]</mo></mrow><mo>,</mo><mi>p</mi><mrow><mo stretchy="true" form="prefix">[</mo><mtext mathvariant="normal">end</mtext><mo stretchy="true" form="postfix">]</mo></mrow><mo>−</mo><msub><mi>p</mi><mi>o</mi></msub><mrow><mo stretchy="true" form="prefix">[</mo><mtext mathvariant="normal">end</mtext><mo stretchy="true" form="postfix">]</mo></mrow><mo stretchy="false" form="postfix">⟩</mo><mo>&lt;</mo><mrow><mo>∥</mo><mrow><msub><mi>p</mi><mi>c</mi></msub><mo>−</mo><msub><mi>p</mi><mi>o</mi></msub><mrow><mo stretchy="true" form="prefix">[</mo><mtext mathvariant="normal">end</mtext><mo stretchy="true" form="postfix">]</mo></mrow></mrow></mrow><mo>∥</mo></mrow><annotation encoding="application/x-tex">\langle p_{c} - p_{o}\left\lbrack \text{end} \right\rbrack,p\left\lbrack \text{end} \right\rbrack - p_{o}\left\lbrack \text{end} \right\rbrack\rangle &lt; \left. \parallel{p_{c} - p_{o}\left\lbrack \text{end} \right\rbrack} \right.\parallel</annotation></semantics></math>
(we’ve overshot the anchor, we retry with a smaller step)</p>
<p><br />
</p>
<ul>
<li><p><math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Δ</mi><mi>t</mi><mo>←</mo><mfrac><mrow><mi>Δ</mi><mi>t</mi></mrow><mn>2</mn></mfrac></mrow><annotation encoding="application/x-tex">\Delta t \leftarrow \frac{\Delta t}{2}</annotation></semantics></math>,</p></li>
<li><p><strong>continue</strong> (this candidate will be discarded, try
again with a smaller time step instead),</p></li>
</ul></li>
</ul>
<p>- <strong>else</strong><br />
-
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>q</mi><mn>0</mn></msub><mo stretchy="false" form="prefix">[</mo><mi>e</mi><mi>n</mi><mi>d</mi><mspace width="0.222em"></mspace><mo>+</mo><mn>1</mn><mo stretchy="false" form="postfix">]</mo><mo>=</mo><mrow><mo stretchy="true" form="prefix">(</mo><msub><mi>p</mi><mi>c</mi></msub><mo>,</mo><msub><mi>v</mi><mi>c</mi></msub><mo>,</mo><msub><mi>q</mi><mi>c</mi></msub><mo stretchy="true" form="postfix">)</mo></mrow></mrow><annotation encoding="application/x-tex">q_{0}\lbrack end\ +1\rbrack = \left( p_{c},v_{c},q_{c} \right)</annotation></semantics></math>
(We append the result to the end of the
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>q</mi><mn>0</mn></msub><annotation encoding="application/x-tex">q_{0}</annotation></semantics></math>
vector)<br />
- <strong>endif</strong><br />
</p>
<ul>
<li><p><strong>if</strong>
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mrow><mo>∥</mo><mrow><msub><mi>p</mi><mi>c</mi></msub><mo>−</mo><mi>p</mi><mrow><mo stretchy="true" form="prefix">[</mo><mtext mathvariant="normal">end</mtext><mo stretchy="true" form="postfix">]</mo></mrow></mrow></mrow><mo>∥</mo><mo>&lt;</mo><msub><mi>d</mi><mtext mathvariant="normal">stop</mtext></msub></mrow><annotation encoding="application/x-tex">\left. \parallel{p_{c} - p\left\lbrack \text{end} \right\rbrack} \right.\parallel &lt; d_{\text{stop}}</annotation></semantics></math>,</p>
<ul>
<li><p><strong>return</strong> (We are within tolerance of the anchor,
we stop iterating),</p></li>
</ul></li>
<li><p><strong>endif</strong>,</p></li>
</ul>
<p><strong>Output</strong> :
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="true" form="prefix">{</mo><msub><mi>q</mi><mi>o</mi></msub><mo stretchy="false" form="prefix">[</mo><mi>k</mi><mo stretchy="false" form="postfix">]</mo><mo>=</mo><mrow><mo stretchy="true" form="prefix">(</mo><msub><mi>s</mi><mi>o</mi></msub><mo stretchy="false" form="prefix">[</mo><mi>k</mi><mo stretchy="false" form="postfix">]</mo><mo>,</mo><msub><mi>v</mi><mi>o</mi></msub><mo stretchy="false" form="prefix">[</mo><mi>k</mi><mo stretchy="false" form="postfix">]</mo><mo>,</mo><msub><mi>a</mi><mi>o</mi></msub><mo stretchy="false" form="prefix">[</mo><mi>k</mi><mo stretchy="false" form="postfix">]</mo><mo stretchy="true" form="postfix">)</mo></mrow><mo>,</mo><mn>0</mn><mo>≤</mo><mi>k</mi><mo>≤</mo><mi>n</mi><mrow><mo stretchy="true" form="prefix">(</mo><mo>≤</mo><msub><mi>K</mi><mrow><mtext mathvariant="normal">max </mtext><mspace width="0.333em"></mspace></mrow></msub><mo>−</mo><mn>1</mn><mo stretchy="true" form="postfix">)</mo></mrow><mo stretchy="true" form="postfix">}</mo></mrow><annotation encoding="application/x-tex">\left\{ q_{o}\lbrack k\rbrack = \left( s_{o}\lbrack k\rbrack,v_{o}\lbrack k\rbrack,a_{o}\lbrack k\rbrack \right),0 \leq k \leq n\left( \leq K_{\text{max }} - 1 \right) \right\}</annotation></semantics></math></p></div><div class="impl-items"><section id="method.new" class="method"><a class="src rightside" href="../src/ink_stroke_modeler_rs/engine.rs.html#90-105">source</a><h4 class="code-header">pub fn <a href="#method.new" class="fn">new</a>(params: <a class="struct" href="struct.ModelerParams.html" title="struct ink_stroke_modeler_rs::ModelerParams">ModelerParams</a>) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.78.0/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;Self, <a class="struct" href="https://doc.rust-lang.org/1.78.0/alloc/string/struct.String.html" title="struct alloc::string::String">String</a>&gt;</h4></section><details class="toggle method-toggle" open><summary><section id="method.reset" class="method"><a class="src rightside" href="../src/ink_stroke_modeler_rs/engine.rs.html#108-117">source</a><h4 class="code-header">pub fn <a href="#method.reset" class="fn">reset</a>(&amp;mut self)</h4></section></summary><div class="docblock"><p>Clears any in-progress stroke, keeping the same model parameters</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.reset_w_params" class="method"><a class="src rightside" href="../src/ink_stroke_modeler_rs/engine.rs.html#121-136">source</a><h4 class="code-header">pub fn <a href="#method.reset_w_params" class="fn">reset_w_params</a>(&amp;mut self, params: <a class="struct" href="struct.ModelerParams.html" title="struct ink_stroke_modeler_rs::ModelerParams">ModelerParams</a>) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.78.0/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.78.0/std/primitive.unit.html">()</a>, <a class="struct" href="https://doc.rust-lang.org/1.78.0/alloc/string/struct.String.html" title="struct alloc::string::String">String</a>&gt;</h4></section></summary><div class="docblock"><p>Clears any in-progress stroke, and re initialize the model with
the given parameters</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.update" class="method"><a class="src rightside" href="../src/ink_stroke_modeler_rs/engine.rs.html#145-347">source</a><h4 class="code-header">pub fn <a href="#method.update" class="fn">update</a>(
    &amp;mut self,
    input: <a class="struct" href="struct.ModelerInput.html" title="struct ink_stroke_modeler_rs::ModelerInput">ModelerInput</a>
) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.78.0/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="struct" href="https://doc.rust-lang.org/1.78.0/alloc/vec/struct.Vec.html" title="struct alloc::vec::Vec">Vec</a>&lt;<a class="struct" href="struct.ModelerResult.html" title="struct ink_stroke_modeler_rs::ModelerResult">ModelerResult</a>&gt;, <a class="enum" href="error/enum.ModelerError.html" title="enum ink_stroke_modeler_rs::error::ModelerError">ModelerError</a>&gt;</h4></section></summary><div class="docblock"><p>Updates the model with a raw input, and appends newly generated Results to the results vector.
Any previously generated Result values remain valid.
(This does not require that any previous results returned remain in the results vector, as it is
appended to without examining the existing contents)</p>
<p>If this does not return an error, results will contain at least one Result, and potentially
more if the inputs are slower than the minimum output rate</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.predict" class="method"><a class="src rightside" href="../src/ink_stroke_modeler_rs/engine.rs.html#353-381">source</a><h4 class="code-header">pub fn <a href="#method.predict" class="fn">predict</a>(&amp;mut self) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.78.0/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="struct" href="https://doc.rust-lang.org/1.78.0/alloc/vec/struct.Vec.html" title="struct alloc::vec::Vec">Vec</a>&lt;<a class="struct" href="struct.ModelerResult.html" title="struct ink_stroke_modeler_rs::ModelerResult">ModelerResult</a>&gt;, <a class="struct" href="https://doc.rust-lang.org/1.78.0/alloc/string/struct.String.html" title="struct alloc::string::String">String</a>&gt;</h4></section></summary><div class="docblock"><p>Models the given input prediction without changing the internal model state</p>
<p>Returns an error if the model has not yet been initialized,
if there is no stroke in progress</p>
</div></details></div></details></div><h2 id="trait-implementations" class="section-header">Trait Implementations<a href="#trait-implementations" class="anchor">§</a></h2><div id="trait-implementations-list"><details class="toggle implementors-toggle" open><summary><section id="impl-Default-for-StrokeModeler" class="impl"><a class="src rightside" href="../src/ink_stroke_modeler_rs/engine.rs.html#63-82">source</a><a href="#impl-Default-for-StrokeModeler" class="anchor">§</a><h3 class="code-header">impl <a class="trait" href="https://doc.rust-lang.org/1.78.0/core/default/trait.Default.html" title="trait core::default::Default">Default</a> for <a class="struct" href="struct.StrokeModeler.html" title="struct ink_stroke_modeler_rs::StrokeModeler">StrokeModeler</a></h3></section></summary><div class="impl-items"><details class="toggle method-toggle" open><summary><section id="method.default" class="method trait-impl"><a class="src rightside" href="../src/ink_stroke_modeler_rs/engine.rs.html#64-81">source</a><a href="#method.default" class="anchor">§</a><h4 class="code-header">fn <a href="https://doc.rust-lang.org/1.78.0/core/default/trait.Default.html#tymethod.default" class="fn">default</a>() -&gt; Self</h4></section></summary><div class='docblock'>Returns the “default value” for a type. <a href="https://doc.rust-lang.org/1.78.0/core/default/trait.Default.html#tymethod.default">Read more</a></div></details></div></details></div><h2 id="synthetic-implementations" class="section-header">Auto Trait Implementations<a href="#synthetic-implementations" class="anchor">§</a></h2><div id="synthetic-implementations-list"><section id="impl-Freeze-for-StrokeModeler" class="impl"><a href="#impl-Freeze-for-StrokeModeler" class="anchor">§</a><h3 class="code-header">impl <a class="trait" href="https://doc.rust-lang.org/1.78.0/core/marker/trait.Freeze.html" title="trait core::marker::Freeze">Freeze</a> for <a class="struct" href="struct.StrokeModeler.html" title="struct ink_stroke_modeler_rs::StrokeModeler">StrokeModeler</a></h3></section><section id="impl-RefUnwindSafe-for-StrokeModeler" class="impl"><a href="#impl-RefUnwindSafe-for-StrokeModeler" class="anchor">§</a><h3 class="code-header">impl <a class="trait" href="https://doc.rust-lang.org/1.78.0/core/panic/unwind_safe/trait.RefUnwindSafe.html" title="trait core::panic::unwind_safe::RefUnwindSafe">RefUnwindSafe</a> for <a class="struct" href="struct.StrokeModeler.html" title="struct ink_stroke_modeler_rs::StrokeModeler">StrokeModeler</a></h3></section><section id="impl-Send-for-StrokeModeler" class="impl"><a href="#impl-Send-for-StrokeModeler" class="anchor">§</a><h3 class="code-header">impl <a class="trait" href="https://doc.rust-lang.org/1.78.0/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> for <a class="struct" href="struct.StrokeModeler.html" title="struct ink_stroke_modeler_rs::StrokeModeler">StrokeModeler</a></h3></section><section id="impl-Sync-for-StrokeModeler" class="impl"><a href="#impl-Sync-for-StrokeModeler" class="anchor">§</a><h3 class="code-header">impl <a class="trait" href="https://doc.rust-lang.org/1.78.0/core/marker/trait.Sync.html" title="trait core::marker::Sync">Sync</a> for <a class="struct" href="struct.StrokeModeler.html" title="struct ink_stroke_modeler_rs::StrokeModeler">StrokeModeler</a></h3></section><section id="impl-Unpin-for-StrokeModeler" class="impl"><a href="#impl-Unpin-for-StrokeModeler" class="anchor">§</a><h3 class="code-header">impl <a class="trait" href="https://doc.rust-lang.org/1.78.0/core/marker/trait.Unpin.html" title="trait core::marker::Unpin">Unpin</a> for <a class="struct" href="struct.StrokeModeler.html" title="struct ink_stroke_modeler_rs::StrokeModeler">StrokeModeler</a></h3></section><section id="impl-UnwindSafe-for-StrokeModeler" class="impl"><a href="#impl-UnwindSafe-for-StrokeModeler" class="anchor">§</a><h3 class="code-header">impl <a class="trait" href="https://doc.rust-lang.org/1.78.0/core/panic/unwind_safe/trait.UnwindSafe.html" title="trait core::panic::unwind_safe::UnwindSafe">UnwindSafe</a> for <a class="struct" href="struct.StrokeModeler.html" title="struct ink_stroke_modeler_rs::StrokeModeler">StrokeModeler</a></h3></section></div><h2 id="blanket-implementations" class="section-header">Blanket Implementations<a href="#blanket-implementations" class="anchor">§</a></h2><div id="blanket-implementations-list"><details class="toggle implementors-toggle"><summary><section id="impl-Any-for-T" class="impl"><a class="src rightside" href="https://doc.rust-lang.org/1.78.0/src/core/any.rs.html#140">source</a><a href="#impl-Any-for-T" class="anchor">§</a><h3 class="code-header">impl&lt;T&gt; <a class="trait" href="https://doc.rust-lang.org/1.78.0/core/any/trait.Any.html" title="trait core::any::Any">Any</a> for T<div class="where">where
    T: 'static + ?<a class="trait" href="https://doc.rust-lang.org/1.78.0/core/marker/trait.Sized.html" title="trait core::marker::Sized">Sized</a>,</div></h3></section></summary><div class="impl-items"><details class="toggle method-toggle" open><summary><section id="method.type_id" class="method trait-impl"><a class="src rightside" href="https://doc.rust-lang.org/1.78.0/src/core/any.rs.html#141">source</a><a href="#method.type_id" class="anchor">§</a><h4 class="code-header">fn <a href="https://doc.rust-lang.org/1.78.0/core/any/trait.Any.html#tymethod.type_id" class="fn">type_id</a>(&amp;self) -&gt; <a class="struct" href="https://doc.rust-lang.org/1.78.0/core/any/struct.TypeId.html" title="struct core::any::TypeId">TypeId</a></h4></section></summary><div class='docblock'>Gets the <code>TypeId</code> of <code>self</code>. <a href="https://doc.rust-lang.org/1.78.0/core/any/trait.Any.html#tymethod.type_id">Read more</a></div></details></div></details><details class="toggle implementors-toggle"><summary><section id="impl-Borrow%3CT%3E-for-T" class="impl"><a class="src rightside" href="https://doc.rust-lang.org/1.78.0/src/core/borrow.rs.html#208">source</a><a href="#impl-Borrow%3CT%3E-for-T" class="anchor">§</a><h3 class="code-header">impl&lt;T&gt; <a class="trait" href="https://doc.rust-lang.org/1.78.0/core/borrow/trait.Borrow.html" title="trait core::borrow::Borrow">Borrow</a>&lt;T&gt; for T<div class="where">where
    T: ?<a class="trait" href="https://doc.rust-lang.org/1.78.0/core/marker/trait.Sized.html" title="trait core::marker::Sized">Sized</a>,</div></h3></section></summary><div class="impl-items"><details class="toggle method-toggle" open><summary><section id="method.borrow" class="method trait-impl"><a class="src rightside" href="https://doc.rust-lang.org/1.78.0/src/core/borrow.rs.html#210">source</a><a href="#method.borrow" class="anchor">§</a><h4 class="code-header">fn <a href="https://doc.rust-lang.org/1.78.0/core/borrow/trait.Borrow.html#tymethod.borrow" class="fn">borrow</a>(&amp;self) -&gt; <a class="primitive" href="https://doc.rust-lang.org/1.78.0/std/primitive.reference.html">&amp;T</a></h4></section></summary><div class='docblock'>Immutably borrows from an owned value. <a href="https://doc.rust-lang.org/1.78.0/core/borrow/trait.Borrow.html#tymethod.borrow">Read more</a></div></details></div></details><details class="toggle implementors-toggle"><summary><section id="impl-BorrowMut%3CT%3E-for-T" class="impl"><a class="src rightside" href="https://doc.rust-lang.org/1.78.0/src/core/borrow.rs.html#216">source</a><a href="#impl-BorrowMut%3CT%3E-for-T" class="anchor">§</a><h3 class="code-header">impl&lt;T&gt; <a class="trait" href="https://doc.rust-lang.org/1.78.0/core/borrow/trait.BorrowMut.html" title="trait core::borrow::BorrowMut">BorrowMut</a>&lt;T&gt; for T<div class="where">where
    T: ?<a class="trait" href="https://doc.rust-lang.org/1.78.0/core/marker/trait.Sized.html" title="trait core::marker::Sized">Sized</a>,</div></h3></section></summary><div class="impl-items"><details class="toggle method-toggle" open><summary><section id="method.borrow_mut" class="method trait-impl"><a class="src rightside" href="https://doc.rust-lang.org/1.78.0/src/core/borrow.rs.html#217">source</a><a href="#method.borrow_mut" class="anchor">§</a><h4 class="code-header">fn <a href="https://doc.rust-lang.org/1.78.0/core/borrow/trait.BorrowMut.html#tymethod.borrow_mut" class="fn">borrow_mut</a>(&amp;mut self) -&gt; <a class="primitive" href="https://doc.rust-lang.org/1.78.0/std/primitive.reference.html">&amp;mut T</a></h4></section></summary><div class='docblock'>Mutably borrows from an owned value. <a href="https://doc.rust-lang.org/1.78.0/core/borrow/trait.BorrowMut.html#tymethod.borrow_mut">Read more</a></div></details></div></details><details class="toggle implementors-toggle"><summary><section id="impl-From%3CT%3E-for-T" class="impl"><a class="src rightside" href="https://doc.rust-lang.org/1.78.0/src/core/convert/mod.rs.html#765">source</a><a href="#impl-From%3CT%3E-for-T" class="anchor">§</a><h3 class="code-header">impl&lt;T&gt; <a class="trait" href="https://doc.rust-lang.org/1.78.0/core/convert/trait.From.html" title="trait core::convert::From">From</a>&lt;T&gt; for T</h3></section></summary><div class="impl-items"><details class="toggle method-toggle" open><summary><section id="method.from" class="method trait-impl"><a class="src rightside" href="https://doc.rust-lang.org/1.78.0/src/core/convert/mod.rs.html#768">source</a><a href="#method.from" class="anchor">§</a><h4 class="code-header">fn <a href="https://doc.rust-lang.org/1.78.0/core/convert/trait.From.html#tymethod.from" class="fn">from</a>(t: T) -&gt; T</h4></section></summary><div class="docblock"><p>Returns the argument unchanged.</p>
</div></details></div></details><details class="toggle implementors-toggle"><summary><section id="impl-Into%3CU%3E-for-T" class="impl"><a class="src rightside" href="https://doc.rust-lang.org/1.78.0/src/core/convert/mod.rs.html#748-750">source</a><a href="#impl-Into%3CU%3E-for-T" class="anchor">§</a><h3 class="code-header">impl&lt;T, U&gt; <a class="trait" href="https://doc.rust-lang.org/1.78.0/core/convert/trait.Into.html" title="trait core::convert::Into">Into</a>&lt;U&gt; for T<div class="where">where
    U: <a class="trait" href="https://doc.rust-lang.org/1.78.0/core/convert/trait.From.html" title="trait core::convert::From">From</a>&lt;T&gt;,</div></h3></section></summary><div class="impl-items"><details class="toggle method-toggle" open><summary><section id="method.into" class="method trait-impl"><a class="src rightside" href="https://doc.rust-lang.org/1.78.0/src/core/convert/mod.rs.html#758">source</a><a href="#method.into" class="anchor">§</a><h4 class="code-header">fn <a href="https://doc.rust-lang.org/1.78.0/core/convert/trait.Into.html#tymethod.into" class="fn">into</a>(self) -&gt; U</h4></section></summary><div class="docblock"><p>Calls <code>U::from(self)</code>.</p>
<p>That is, this conversion is whatever the implementation of
<code><a href="https://doc.rust-lang.org/1.78.0/core/convert/trait.From.html" title="trait core::convert::From">From</a>&lt;T&gt; for U</code> chooses to do.</p>
</div></details></div></details><details class="toggle implementors-toggle"><summary><section id="impl-TryFrom%3CU%3E-for-T" class="impl"><a class="src rightside" href="https://doc.rust-lang.org/1.78.0/src/core/convert/mod.rs.html#805-807">source</a><a href="#impl-TryFrom%3CU%3E-for-T" class="anchor">§</a><h3 class="code-header">impl&lt;T, U&gt; <a class="trait" href="https://doc.rust-lang.org/1.78.0/core/convert/trait.TryFrom.html" title="trait core::convert::TryFrom">TryFrom</a>&lt;U&gt; for T<div class="where">where
    U: <a class="trait" href="https://doc.rust-lang.org/1.78.0/core/convert/trait.Into.html" title="trait core::convert::Into">Into</a>&lt;T&gt;,</div></h3></section></summary><div class="impl-items"><details class="toggle" open><summary><section id="associatedtype.Error-1" class="associatedtype trait-impl"><a href="#associatedtype.Error-1" class="anchor">§</a><h4 class="code-header">type <a href="https://doc.rust-lang.org/1.78.0/core/convert/trait.TryFrom.html#associatedtype.Error" class="associatedtype">Error</a> = <a class="enum" href="https://doc.rust-lang.org/1.78.0/core/convert/enum.Infallible.html" title="enum core::convert::Infallible">Infallible</a></h4></section></summary><div class='docblock'>The type returned in the event of a conversion error.</div></details><details class="toggle method-toggle" open><summary><section id="method.try_from" class="method trait-impl"><a class="src rightside" href="https://doc.rust-lang.org/1.78.0/src/core/convert/mod.rs.html#812">source</a><a href="#method.try_from" class="anchor">§</a><h4 class="code-header">fn <a href="https://doc.rust-lang.org/1.78.0/core/convert/trait.TryFrom.html#tymethod.try_from" class="fn">try_from</a>(value: U) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.78.0/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;T, &lt;T as <a class="trait" href="https://doc.rust-lang.org/1.78.0/core/convert/trait.TryFrom.html" title="trait core::convert::TryFrom">TryFrom</a>&lt;U&gt;&gt;::<a class="associatedtype" href="https://doc.rust-lang.org/1.78.0/core/convert/trait.TryFrom.html#associatedtype.Error" title="type core::convert::TryFrom::Error">Error</a>&gt;</h4></section></summary><div class='docblock'>Performs the conversion.</div></details></div></details><details class="toggle implementors-toggle"><summary><section id="impl-TryInto%3CU%3E-for-T" class="impl"><a class="src rightside" href="https://doc.rust-lang.org/1.78.0/src/core/convert/mod.rs.html#790-792">source</a><a href="#impl-TryInto%3CU%3E-for-T" class="anchor">§</a><h3 class="code-header">impl&lt;T, U&gt; <a class="trait" href="https://doc.rust-lang.org/1.78.0/core/convert/trait.TryInto.html" title="trait core::convert::TryInto">TryInto</a>&lt;U&gt; for T<div class="where">where
    U: <a class="trait" href="https://doc.rust-lang.org/1.78.0/core/convert/trait.TryFrom.html" title="trait core::convert::TryFrom">TryFrom</a>&lt;T&gt;,</div></h3></section></summary><div class="impl-items"><details class="toggle" open><summary><section id="associatedtype.Error" class="associatedtype trait-impl"><a href="#associatedtype.Error" class="anchor">§</a><h4 class="code-header">type <a href="https://doc.rust-lang.org/1.78.0/core/convert/trait.TryInto.html#associatedtype.Error" class="associatedtype">Error</a> = &lt;U as <a class="trait" href="https://doc.rust-lang.org/1.78.0/core/convert/trait.TryFrom.html" title="trait core::convert::TryFrom">TryFrom</a>&lt;T&gt;&gt;::<a class="associatedtype" href="https://doc.rust-lang.org/1.78.0/core/convert/trait.TryFrom.html#associatedtype.Error" title="type core::convert::TryFrom::Error">Error</a></h4></section></summary><div class='docblock'>The type returned in the event of a conversion error.</div></details><details class="toggle method-toggle" open><summary><section id="method.try_into" class="method trait-impl"><a class="src rightside" href="https://doc.rust-lang.org/1.78.0/src/core/convert/mod.rs.html#797">source</a><a href="#method.try_into" class="anchor">§</a><h4 class="code-header">fn <a href="https://doc.rust-lang.org/1.78.0/core/convert/trait.TryInto.html#tymethod.try_into" class="fn">try_into</a>(self) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.78.0/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;U, &lt;U as <a class="trait" href="https://doc.rust-lang.org/1.78.0/core/convert/trait.TryFrom.html" title="trait core::convert::TryFrom">TryFrom</a>&lt;T&gt;&gt;::<a class="associatedtype" href="https://doc.rust-lang.org/1.78.0/core/convert/trait.TryFrom.html#associatedtype.Error" title="type core::convert::TryFrom::Error">Error</a>&gt;</h4></section></summary><div class='docblock'>Performs the conversion.</div></details></div></details></div></section></div></main></body></html>